<br> <br>
<div class="col-md-10 offset-md-1">
  <div class="card text-center">
    <div class="card-header tituloCard">
      Licencias
    </div>
    <div class="card-body">
      <div class="container">
        <p class="separador">
          Nuevo Registro
        </p>
        <button type="button" class="btn btn-primary btn-lg" on-click="showForm()"> Nuevo Registro</button>
        <br>
        <br>
        <div class="card text-card" *ngIf="isformShow == true">
          <div class="card-body">
            <form [formGroup]="form" (ngSubmit)="sendlicencia($event)">
              <br>

              <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-3 my-3">
                  <p class="separador text-center">Seleccione Una Categoria: </p>
                </div>
                <div class="contenido col-12 col-sm-12 col-md-12 col-lg-9">
                  <div class="mb-2 form-floating">
                    <div class="row">
                      <div class="col-sm-12 col-md-12 col-lg-5">
                        <div class="mb-2 form-floating">
                          <select class="form-select form-control" #type (change)="tipeselect(type)"
                            formControlName="Categoria">
                            <option value="">-- Seleccionar --</option>
                            <option *ngFor="let option of TypeList; let i=index" [value]="i">
                              {{option}}
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>



              <div class="row" *ngIf="institucionsee">
                <div class="col-12 col-sm-12 col-md-12 col-lg-3">
                  <p class="separador text-center">{{titleinstitucion}}</p>
                </div>
                <div class="contenido col-12 col-sm-12 col-md-12 col-lg-9">
                  <input type="text" class="form-control" name="Institucion" formControlName="Institucion"
                    placeholder="Nombre">
                  <div *ngIf="form.get('Institucion')!.errors && form.get('Institucion')!.touched ">
                    <p class="msjErr" *ngIf="form.get('Institucion')!.hasError('required')">
                      <i class="fas fa-times-circle"></i> Este campo es requerido
                    </p>
                  </div>
                </div>
              </div>

              <div class="row" *ngIf="datallesee">
                <div class="col-12 col-sm-12 col-md-12 col-lg-3">
                  <p class="separador text-center">{{titledetalles}}</p>
                </div>
                <div class="contenido col-12 col-sm-12 col-md-12 col-lg-9">
                  <input type="text" class="form-control" name="Detalles" formControlName="Detalles"
                    placeholder="Detalles">
                  <div *ngIf="form.get('Detalles')!.errors && form.get('Detalles')!.touched ">
                    <p class="msjErr" *ngIf="form.get('Detalles')!.hasError('required')">
                      <i class="fas fa-times-circle"></i> Este campo es requerido
                    </p>
                  </div>
                </div>
              </div>



              <div class="row" *ngIf="fechasee">
                <div class="col-12 col-sm-12 col-md-12 col-lg-3">
                  <p class="separador text-center">{{titlefecha}}</p>
                </div>
                <div class="contenido col-12 col-sm-12 col-md-12 col-lg-9">
                  <input #fecha type="date" class="form-control" name="Fecha" formControlName="Fecha"
                    (change)="savedate(fecha.value)">
                  <div *ngIf="form.get('Fecha')!.errors && form.get('Fecha')!.touched ">
                    <p class="msjErr" *ngIf="form.get('Fecha')!.hasError('required')">
                      <i class="fas fa-times-circle"></i> Este campo es requerido
                    </p>
                  </div>
                  <div *ngIf="form.get('Cantidad')!.touched || form.get('Tipo')!.touched">
                    <p class="msjErr" *ngIf="Fecha == ''">
                      <i class="fas fa-times-circle"></i> Este necesario Este campo
                    </p>

                  </div>
                </div>
              </div>

              <div class="row" *ngIf="tiposee">
                <div class="col-12 col-sm-12 col-md-12 col-lg-3">
                  <p class="separador text-center">{{titletipo}}</p>
                </div>
                <div class="contenido col-12 col-sm-12 col-md-12 col-lg-9">
                  <select #typefecha id="typefecha" name="typefecha" class="form-select form-control"
                    formControlName="Tipo" (change)="savetipe(typefecha.value)">
                    <option value="" selected>-- Seleccionar --</option>
                    <option *ngFor="let option of TypeListFecha; let i=index" [value]="i">
                      {{option}}
                    </option>
                  </select>
                  <div *ngIf="form.get('Cantidad')!.touched || form.get('Tipo')!.touched">
                    <p class="msjErr" *ngIf="typeFecha == ''">
                      <i class="fas fa-times-circle"></i> Este necesario Este campo
                    </p>
                  </div>
                </div>
              </div>

              <div class="row" *ngIf="cantidadsee">
                <div class="col-12 col-sm-12 col-md-12 col-lg-3">
                  <p class="separador text-center">{{titlecantidad}}</p>
                </div>
                <div class="contenido col-12 col-sm-12 col-md-12 col-lg-9">
                  <input #cantidad type="number" min="1" class="form-control" name="Cantidad" formControlName="Cantidad"
                    placeholder="Tiempo (Numero)" (change)="UpdateVencimiento(cantidad.value)">
                  <div *ngIf="form.get('Cantidad')!.errors && form.get('Cantidad')!.touched ">
                    <p class="msjErr" *ngIf="form.get('Cantidad')!.hasError('required')">
                      <i class="fas fa-times-circle"></i> Este campo es requerido
                    </p>

                  </div>
                  <div *ngIf="form.get('Cantidad')!.touched || form.get('Tipo')!.touched">
                    <p class="msjErr" *ngIf="typeFecha == ''">
                      <i class="fas fa-times-circle"></i> Este necesario seleccionar un tipo
                    </p>
                  </div>

                </div>
              </div>

              <div class="row" *ngIf="proxfechasee">
                <div class="col-12 col-sm-12 col-md-12 col-lg-3">
                  <p class="separador text-center">{{titleproxfecha}}</p>
                </div>
                <div class="contenido col-12 col-sm-12 col-md-12 col-lg-9">
                  <input type="date" class="form-control" name="Vencimiento" formControlName="Vencimiento"
                    placeholder="Fecha Vencimieno">
                  <div *ngIf="form.get('Vencimiento')!.errors && form.get('Vencimiento')!.touched ">
                    <p class="msjErr" *ngIf="form.get('Vencimiento')!.hasError('required')">
                      <i class="fas fa-times-circle"></i> Este campo es requerido
                    </p>
                  </div>
                </div>
              </div>

              <div class="card" *ngIf="type.value != ''">
                <button type="submit" class="btn btn-success" [disabled]="form.invalid"
                  value="Registrar">Registrar</button>
              </div>


            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<div class="col-md-10 offset-md-1">
  <div class="card text-center">
    <div class="card-header tituloCard"> Registros </div>
    <div class="cardd-body">
      <div class="container">
        <div *ngIf="allLicences.length==0">
          <h4>Aún no hay Ningun tipo de documento </h4>
        </div>
        <br>
        <div class="row">
          <div class="col-sm-12 col-md-6 col-lg-3" *ngFor="let evento of allLicences; let i=index;">
            <div class="card text-left">
              <div class="card-header">
                <b><i> {{evento.categoria}} </i></b>
              </div>
              <div class="row  justify-content-start">

                <div class="d-flex justify-content-start">
                  <span *ngIf="evento.categoria == 'Garantias'">
                    <b><i>Fabricante:</i></b>
                  </span>
                  <span *ngIf="evento.categoria == 'Servicios'">
                    <b><i>Provedor:</i></b>
                  </span>
                  <span *ngIf="evento.categoria == 'Licencias'">
                    <b><i>Provedor:</i></b>
                  </span>
                  <span *ngIf="evento.categoria == 'Fecha'">
                    <b><i>Fecha:</i></b>
                  </span>
                  &nbsp;&nbsp;
                  {{evento.Institucion}}

                </div>

                <div class="d-flex justify-content-start">
                  <span>
                    <b><i>Detalles:</i></b>
                  </span>
                  &nbsp;&nbsp;
                  {{evento.detalles}}
                </div>

                <div class="d-flex justify-content-start"
                  *ngIf="evento.categoria == 'Garantias' || evento.categoria == 'Servicios'">
                  <span>
                    <b><i>Sucede cada:</i></b>
                  </span>
                  &nbsp;&nbsp;
                  <span *ngIf="evento.cantidad != '1'"> {{evento.cantidad}}
                    <span *ngIf="evento.tipo == '0'">&nbsp; Meses</span>
                    <span *ngIf="evento.tipo == '1'">&nbsp; Años </span>
                  </span>
                  <span *ngIf="evento.cantidad == '1'">
                    <span *ngIf="evento.tipo == '0'">&nbsp; Mes</span>
                    <span *ngIf="evento.tipo == '1'">&nbsp; Año </span>
                  </span>


                </div>


                <br>

              </div>


              <div class="card-body">
                <div class="row">
                  <div class="col-4 col-sm-4 col-md-4 col-lg-4">
                    <button type="button" class="btn btn-primary botones" [routerLink]="'../See/'+evento.ID"
                      routerLinkActive="active"><i class="fas fa-eye"></i></button>
                  </div>
                  <div class="col-4 col-sm-4 col-md-4 col-lg-4">
                    <button type="button" class="btn btn-warning botones" [routerLink]="'../Edit/'+evento.ID"
                      routerLinkActive="active"><i class="fas fa-pencil-alt"></i></button>
                  </div>
                  <div class="col-4 col-sm-4 col-md-4 col-lg-4">
                    <button type="button" class="btn btn-danger botones" on-click="deleteLicencia(evento.ID)"><i
                        class="fas fa-trash-alt"></i></button>
                  </div>
                </div>
              </div>
              <div class="card-footer text-muted">

                {{evento.Fecha | date: 'dd - MMMM'}}

              </div>
            </div>
          </div>
        </div>
        <br>
      </div>
    </div>
  </div>
</div>
